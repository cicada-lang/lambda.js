remove `cache` from `Def`
use trail to implement equivalent for recursive functions
